CREATE DATABASE SAMPLE16;
USE SAMPLE16;

CREATE TABLE DEPARTMENTS(
	DEPT_ID INT PRIMARY KEY,
    DEPT_NAME VARCHAR(10) NOT NULL
);
INSERT INTO DEPARTMENTS VALUES 
(101,"IT"),
(102,"HR"),
(103,"FINANCE");

SELECT * FROM DEPARTMENTS;

CREATE TABLE EMPLOYEES(
	EMP_ID INT PRIMARY KEY,
    EMP_NAME VARCHAR(20) NOT NULL,
    DEPT_ID INT,
    FOREIGN KEY (DEPT_ID) REFERENCES DEPARTMENTS(DEPT_ID)
);
INSERT INTO EMPLOYEES VALUES 
(1,"E1",101),
(2,"E2",101),
(3,"E3",102);
SELECT * FROM EMPLOYEES;

SET SQL_SAFE_UPDATES = 0;
DELETE FROM DEPARTMENTS
WHERE DEPT_ID = 103;
SELECT * FROM DEPARTMENTS;

DELETE FROM DEPARTMENTS
WHERE DEPT_ID = 102;

UPDATE DEPARTMENTS SET DEPT_ID = 1002
WHERE DEPT_ID = 102;

-- CASCADE


CREATE TABLE DEPARTMENTS1(
	DEPT_ID INT PRIMARY KEY,
    DEPT_NAME VARCHAR(10) NOT NULL
);
INSERT INTO DEPARTMENTS1 VALUES 
(101,"IT"),
(102,"HR"),
(103,"FINANCE");

SELECT * FROM DEPARTMENTS;

CREATE TABLE EMPLOYEES1(
	EMP_ID INT PRIMARY KEY,
    EMP_NAME VARCHAR(20) NOT NULL,
    DEPT_ID INT,
    FOREIGN KEY (DEPT_ID) REFERENCES DEPARTMENTS1(DEPT_ID) ON DELETE CASCADE
);
INSERT INTO EMPLOYEES1 VALUES 
(1,"E1",101),
(2,"E2",101),
(3,"E3",102);
SELECT * FROM EMPLOYEES1;
SELECT * FROM DEPARTMENTS1;

UPDATE DEPARTMENTS1 SET DEPT_ID = 1003
WHERE DEPT_ID = 103;

DELETE FROM DEPARTMENTS1
WHERE DEPT_ID = 1003;

SELECT * FROM DEPARTMENTS1;

UPDATE DEPARTMENTS1 SET DEPT_ID = 1002
WHERE DEPT_ID = 102;

DELETE FROM DEPARTMENTS1
WHERE DEPT_ID = 101;
SELECT * FROM DEPARTMENTS1;
SELECT * FROM EMPLOYEES1;



CREATE TABLE DEPARTMENTS2(
	DEPT_ID INT PRIMARY KEY,
    DEPT_NAME VARCHAR(10) NOT NULL
);
INSERT INTO DEPARTMENTS2 VALUES 
(101,"IT"),
(102,"HR"),
(103,"FINANCE");

SELECT * FROM DEPARTMENTS2;

CREATE TABLE EMPLOYEES2(
	EMP_ID INT PRIMARY KEY,
    EMP_NAME VARCHAR(20) NOT NULL,
    DEPT_ID INT,
    FOREIGN KEY (DEPT_ID) REFERENCES DEPARTMENTS2(DEPT_ID) ON UPDATE CASCADE
);
INSERT INTO EMPLOYEES2 VALUES 
(1,"E1",101),
(2,"E2",101),
(3,"E3",102);
SELECT * FROM EMPLOYEES2;

UPDATE DEPARTMENTS2 SET DEPT_ID = 1003
WHERE DEPT_ID = 103;
SELECT * FROM DEPARTMENTS2;

DELETE FROM DEPARTMENTS2
WHERE DEPT_ID = 1003;

DELETE FROM DEPARTMENTS2
WHERE DEPT_ID = 102;

UPDATE DEPARTMENTS2 SET DEPT_ID = 1001
WHERE DEPT_ID = 101;
SELECT * FROM DEPARTMENTS2;

SELECT * FROM EMPLOYEES2;


CREATE TABLE DEPARTMENTS3(
	DEPT_ID INT PRIMARY KEY,
    DEPT_NAME VARCHAR(10) NOT NULL
);
INSERT INTO DEPARTMENTS3 VALUES 
(101,"IT"),
(102,"HR"),
(103,"FINANCE");

SELECT * FROM DEPARTMENTS3;

CREATE TABLE EMPLOYEES3(
	EMP_ID INT PRIMARY KEY,
    EMP_NAME VARCHAR(20) NOT NULL,
    DEPT_ID INT,
    FOREIGN KEY (DEPT_ID) REFERENCES DEPARTMENTS3(DEPT_ID) ON UPDATE CASCADE ON DELETE CASCADE
);
INSERT INTO EMPLOYEES3 VALUES 
(1,"E1",101),
(2,"E2",101),
(3,"E3",102);
SELECT * FROM EMPLOYEES3;

UPDATE DEPARTMENTS3 SET DEPT_ID = 1001
WHERE DEPT_ID = 101;
SELECT * FROM DEPARTMENTS3;
SELECT * FROM EMPLOYEES3;

DELETE FROM DEPARTMENTS3
WHERE DEPT_ID = 102;
SELECT * FROM DEPARTMENTS3;
SELECT * FROM EMPLOYEES3;

-- NOT NULL

CREATE TABLE DEPARTMENTS4(
	DEPT_ID INT PRIMARY KEY,
    DEPT_NAME VARCHAR(10) NOT NULL
);
INSERT INTO DEPARTMENTS4 VALUES 
(101,"IT"),
(102,"HR"),
(103,"FINANCE");

SELECT * FROM DEPARTMENTS;

CREATE TABLE EMPLOYEES4(
	EMP_ID INT PRIMARY KEY,
    EMP_NAME VARCHAR(20) NOT NULL,
    DEPT_ID INT,
    FOREIGN KEY (DEPT_ID) REFERENCES DEPARTMENTS4(DEPT_ID) ON DELETE SET NULL
);
INSERT INTO EMPLOYEES4 VALUES 
(1,"E1",101),
(2,"E2",101),
(3,"E3",102);
SELECT * FROM DEPARTMENTS4;
SELECT * FROM EMPLOYEES4;

DELETE FROM DEPARTMENTS4
WHERE DEPT_ID = 101;
SELECT * FROM DEPARTMENTS4;
SELECT * FROM EMPLOYEES4;

UPDATE DEPARTMENTS4 SET DEPT_ID = 1002
WHERE DEPT_ID = 102;




CREATE TABLE DEPARTMENTS5(
	DEPT_ID INT PRIMARY KEY,
    DEPT_NAME VARCHAR(10) NOT NULL
);
INSERT INTO DEPARTMENTS5 VALUES 
(101,"IT"),
(102,"HR"),
(103,"FINANCE");

SELECT * FROM DEPARTMENTS;

CREATE TABLE EMPLOYEES5(
	EMP_ID INT PRIMARY KEY,
    EMP_NAME VARCHAR(20) NOT NULL,
    DEPT_ID INT,
    FOREIGN KEY (DEPT_ID) REFERENCES DEPARTMENTS5(DEPT_ID) ON UPDATE SET NULL
);
INSERT INTO EMPLOYEES5 VALUES 
(1,"E1",101),
(2,"E2",101),
(3,"E3",102);
SELECT * FROM DEPARTMENTS5;
SELECT * FROM EMPLOYEES5;


UPDATE DEPARTMENTS5 SET DEPT_ID = 1002
WHERE DEPT_ID = 102;
SELECT * FROM DEPARTMENTS5;
SELECT * FROM EMPLOYEES5;

DELETE FROM DEPARTMENTS5
WHERE DEPT_ID = 101;



CREATE TABLE DEPARTMENTS6(
	DEPT_ID INT PRIMARY KEY,
    DEPT_NAME VARCHAR(10) NOT NULL
);
INSERT INTO DEPARTMENTS6 VALUES 
(101,"IT"),
(102,"HR"),
(103,"FINANCE");

SELECT * FROM DEPARTMENTS6;

CREATE TABLE EMPLOYEES6(
	EMP_ID INT PRIMARY KEY,
    EMP_NAME VARCHAR(20) NOT NULL,
    DEPT_ID INT,
    FOREIGN KEY (DEPT_ID) REFERENCES DEPARTMENTS6(DEPT_ID) ON DELETE SET NULL ON UPDATE SET NULL
);
INSERT INTO EMPLOYEES6 VALUES 
(1,"E1",101),
(2,"E2",101),
(3,"E3",102);
SELECT * FROM EMPLOYEES6;


UPDATE DEPARTMENTS6 SET DEPT_ID = 1001
WHERE DEPT_ID = 101;
SELECT * FROM DEPARTMENTS6;
SELECT * FROM EMPLOYEES6;

DELETE FROM DEPARTMENTS6
WHERE DEPT_ID = 102;
SELECT * FROM DEPARTMENTS6;
SELECT * FROM EMPLOYEES6;



